{
	"info": {
		"_postman_id": "bluestone-apps-api-collection",
		"name": "Bluestone Apps - Multi-App Manager API",
		"description": "Complete API collection for testing all endpoints in the Multi-App Manager system including Admin Portal APIs and Mobile App APIs",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{admin_token}}",
				"type": "string"
			}
		]
	},
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:3000/api/v1",
			"type": "string"
		},
		{
			"key": "admin_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "mobile_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "app_id",
			"value": "1",
			"type": "string"
		},
		{
			"key": "user_id",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "Admin Portal APIs",
			"item": [
				{
					"name": "Authentication",
					"item": [
						{
							"name": "Admin Login",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 200) {",
											"    var jsonData = pm.response.json();",
											"    pm.collectionVariables.set('admin_token', jsonData.data.token);",
											"    pm.collectionVariables.set('user_id', jsonData.data.user.id);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"admin@knoxweb.com\",\n  \"password\": \"admin123\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/auth/login",
									"host": ["{{base_url}}"],
									"path": ["auth", "login"]
								}
							},
							"response": []
						},
						{
							"name": "Get Current User",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/auth/me",
									"host": ["{{base_url}}"],
									"path": ["auth", "me"]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Apps Management",
					"item": [
						{
							"name": "Get All Apps",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/apps",
									"host": ["{{base_url}}"],
									"path": ["apps"]
								}
							},
							"response": []
						},
						{
							"name": "Get App by ID",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/apps/{{app_id}}",
									"host": ["{{base_url}}"],
									"path": ["apps", "{{app_id}}"]
								}
							},
							"response": []
						},
						{
							"name": "Create App",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"Test App\",\n  \"description\": \"Test application\",\n  \"app_key\": \"test_app\",\n  \"status\": \"active\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/apps",
									"host": ["{{base_url}}"],
									"path": ["apps"]
								}
							},
							"response": []
						},
						{
							"name": "Update App",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"Updated App Name\",\n  \"description\": \"Updated description\",\n  \"status\": \"active\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/apps/{{app_id}}",
									"host": ["{{base_url}}"],
									"path": ["apps", "{{app_id}}"]
								}
							},
							"response": []
						},
						{
							"name": "Delete App",
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/apps/{{app_id}}",
									"host": ["{{base_url}}"],
									"path": ["apps", "{{app_id}}"]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "App Templates",
					"item": [
						{
							"name": "Get All Templates",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/app-templates",
									"host": ["{{base_url}}"],
									"path": ["app-templates"]
								}
							},
							"response": []
						},
						{
							"name": "Get Template by ID",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/app-templates/8",
									"host": ["{{base_url}}"],
									"path": ["app-templates", "8"]
								}
							},
							"response": []
						},
						{
							"name": "Create Template",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"New Template\",\n  \"description\": \"Template description\",\n  \"category\": \"Business\",\n  \"icon\": \"Briefcase\",\n  \"is_active\": true\n}"
								},
								"url": {
									"raw": "{{base_url}}/app-templates",
									"host": ["{{base_url}}"],
									"path": ["app-templates"]
								}
							},
							"response": []
						},
						{
							"name": "Duplicate Template",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"new_name\": \"Duplicated Template\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/app-templates/8/duplicate",
									"host": ["{{base_url}}"],
									"path": ["app-templates", "8", "duplicate"]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Screens Management",
					"item": [
						{
							"name": "Get All Screens",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/screens",
									"host": ["{{base_url}}"],
									"path": ["screens"]
								}
							},
							"response": []
						},
						{
							"name": "Get Screen by ID",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/screens/1",
									"host": ["{{base_url}}"],
									"path": ["screens", "1"]
								}
							},
							"response": []
						},
						{
							"name": "Create Screen",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"New Screen\",\n  \"screen_key\": \"new_screen\",\n  \"description\": \"Screen description\",\n  \"icon\": \"Layout\",\n  \"category\": \"General\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/screens",
									"host": ["{{base_url}}"],
									"path": ["screens"]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Screen Elements",
					"item": [
						{
							"name": "Get All Elements",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/screen-elements",
									"host": ["{{base_url}}"],
									"path": ["screen-elements"]
								}
							},
							"response": []
						},
						{
							"name": "Get Element by ID",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/screen-elements/1",
									"host": ["{{base_url}}"],
									"path": ["screen-elements", "1"]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "App Users Management",
					"item": [
						{
							"name": "Get App Users",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/apps/{{app_id}}/users?page=1&per_page=10",
									"host": ["{{base_url}}"],
									"path": ["apps", "{{app_id}}", "users"],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "per_page",
											"value": "10"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get User Stats",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/apps/{{app_id}}/users/stats",
									"host": ["{{base_url}}"],
									"path": ["apps", "{{app_id}}", "users", "stats"]
								}
							},
							"response": []
						},
						{
							"name": "Create App User",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"testuser@example.com\",\n  \"password\": \"password123\",\n  \"first_name\": \"Test\",\n  \"last_name\": \"User\",\n  \"phone\": \"+1234567890\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/apps/{{app_id}}/users",
									"host": ["{{base_url}}"],
									"path": ["apps", "{{app_id}}", "users"]
								}
							},
							"response": []
						},
						{
							"name": "Update User Status",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"status\": \"suspended\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/apps/{{app_id}}/users/1/status",
									"host": ["{{base_url}}"],
									"path": ["apps", "{{app_id}}", "users", "1", "status"]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "File Upload",
					"item": [
						{
							"name": "Upload Image",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "file",
											"type": "file",
											"src": []
										},
										{
											"key": "app_id",
											"value": "{{app_id}}",
											"type": "text"
										},
										{
											"key": "app_name",
											"value": "Test App",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{base_url}}/upload/image",
									"host": ["{{base_url}}"],
									"path": ["upload", "image"]
								}
							},
							"response": []
						},
						{
							"name": "Delete File",
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/upload/test_app/filename.jpg",
									"host": ["{{base_url}}"],
									"path": ["upload", "test_app", "filename.jpg"]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Mobile App APIs",
			"item": [
				{
					"name": "Authentication",
					"item": [
						{
							"name": "Register",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    var jsonData = pm.response.json();",
											"    pm.collectionVariables.set('mobile_token', jsonData.data.accessToken);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"app_id\": {{app_id}},\n  \"email\": \"mobileuser@example.com\",\n  \"password\": \"password123\",\n  \"first_name\": \"Mobile\",\n  \"last_name\": \"User\",\n  \"phone\": \"+1234567890\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/mobile/auth/register",
									"host": ["{{base_url}}"],
									"path": ["mobile", "auth", "register"]
								}
							},
							"response": []
						},
						{
							"name": "Login",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 200) {",
											"    var jsonData = pm.response.json();",
											"    pm.collectionVariables.set('mobile_token', jsonData.data.accessToken);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"app_id\": {{app_id}},\n  \"email\": \"mobileuser@example.com\",\n  \"password\": \"password123\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/mobile/auth/login",
									"host": ["{{base_url}}"],
									"path": ["mobile", "auth", "login"]
								}
							},
							"response": []
						},
						{
							"name": "Verify Email",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{mobile_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"verification_code\": \"123456\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/mobile/auth/verify-email",
									"host": ["{{base_url}}"],
									"path": ["mobile", "auth", "verify-email"]
								}
							},
							"response": []
						},
						{
							"name": "Logout",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{mobile_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{base_url}}/mobile/auth/logout",
									"host": ["{{base_url}}"],
									"path": ["mobile", "auth", "logout"]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "User Profile",
					"item": [
						{
							"name": "Get My Profile",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{mobile_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/mobile/profile",
									"host": ["{{base_url}}"],
									"path": ["mobile", "profile"]
								}
							},
							"response": []
						},
						{
							"name": "Update Profile",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{mobile_token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"first_name\": \"Updated\",\n  \"last_name\": \"Name\",\n  \"phone\": \"+1987654321\",\n  \"bio\": \"This is my bio\",\n  \"date_of_birth\": \"1990-01-01\",\n  \"gender\": \"male\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/mobile/profile",
									"host": ["{{base_url}}"],
									"path": ["mobile", "profile"]
								}
							},
							"response": []
						},
						{
							"name": "Upload Avatar",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{mobile_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "avatar",
											"type": "file",
											"src": []
										}
									]
								},
								"url": {
									"raw": "{{base_url}}/mobile/profile/avatar",
									"host": ["{{base_url}}"],
									"path": ["mobile", "profile", "avatar"]
								}
							},
							"response": []
						},
						{
							"name": "Change Password",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{mobile_token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"current_password\": \"password123\",\n  \"new_password\": \"newpassword123\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/mobile/profile/password",
									"host": ["{{base_url}}"],
									"path": ["mobile", "profile", "password"]
								}
							},
							"response": []
						},
						{
							"name": "Get User Permissions",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{mobile_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/mobile/profile/permissions",
									"host": ["{{base_url}}"],
									"path": ["mobile", "profile", "permissions"]
								}
							},
							"response": []
						},
						{
							"name": "Get Other User Profile",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{mobile_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/mobile/profile/2",
									"host": ["{{base_url}}"],
									"path": ["mobile", "profile", "2"]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Screens & Content",
					"item": [
						{
							"name": "Get All App Screens",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{mobile_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/mobile/apps/{{app_id}}/screens",
									"host": ["{{base_url}}"],
									"path": ["mobile", "apps", "{{app_id}}", "screens"]
								}
							},
							"response": []
						},
						{
							"name": "Get Screen Content",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{mobile_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/mobile/apps/{{app_id}}/screens/1",
									"host": ["{{base_url}}"],
									"path": ["mobile", "apps", "{{app_id}}", "screens", "1"]
								}
							},
							"response": []
						},
						{
							"name": "Get Screen by Key",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{mobile_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/mobile/apps/{{app_id}}/screens/key/home",
									"host": ["{{base_url}}"],
									"path": ["mobile", "apps", "{{app_id}}", "screens", "key", "home"]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Health Check",
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/../health",
					"host": ["{{base_url}}"],
					"path": ["..", "health"]
				}
			},
			"response": []
		}
	]
}
